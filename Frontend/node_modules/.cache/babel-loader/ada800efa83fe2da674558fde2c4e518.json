{"ast":null,"code":"var _jsxFileName = \"/Users/Ying_Luo/Downloads/ez_buy/src/components/account/Login.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport useForm from 'react-hook-form';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login(props) {\n  _s();\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n\n  const onSubmit = async data => {\n    // 3. 处理登录逻辑\n    try {\n      const {\n        email,\n        password\n      } = data;\n      const res = await axios.post('/auth/login', {\n        email,\n        password\n      });\n      const jwToken = res.data;\n      console.log(jwToken);\n      global.auth.setToken(jwToken);\n      toast.success('Login Success'); // 4. 跳转到首页视图\n\n      props.history.push('/');\n    } catch (error) {\n      const message = error.response.data.message;\n      toast.error(message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"box login-box\",\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: `input ${errors.email && 'is-danger'}`,\n            type: \"text\",\n            placeholder: \"Email\",\n            name: \"email\",\n            ref: register({\n              required: 'email is required',\n              pattern: {\n                value: /^[A-Za-z0-9]+([_\\\\.][A-Za-z0-9]+)*@([A-Za-z0-9\\\\-]+\\.)+[A-Za-z]{2,6}$/,\n                message: 'invalid email'\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 13\n          }, this), errors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"helper has-text-danger\",\n            children: errors.email.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: `input ${errors.password && 'is-danger'}`,\n            type: \"password\",\n            placeholder: \"Password\",\n            name: \"password\",\n            ref: register({\n              required: 'password is required',\n              minLength: {\n                value: 6,\n                message: 'cannot be less than 6 digits'\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), errors.password && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"helper has-text-danger\",\n            children: errors.password.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-fullwidth is-primary\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"iyH731LTjAbxnbpM16EGorBPneQ=\", false, function () {\n  return [useForm];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/Ying_Luo/Downloads/ez_buy/src/components/account/Login.js"],"names":["React","useForm","toast","Login","props","register","handleSubmit","errors","onSubmit","data","email","password","res","axios","post","jwToken","console","log","global","auth","setToken","success","history","push","error","message","response","required","pattern","value","minLength"],"mappings":"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","sourcesContent":["import React from 'react';\nimport useForm from 'react-hook-form';\nimport { toast } from 'react-toastify';\n\nexport default function Login(props) {\n  const { register, handleSubmit, errors } = useForm();\n\n  const onSubmit = async data => {\n    // 3. 处理登录逻辑\n    try {\n      const { email, password } = data;\n      const res = await axios.post('/auth/login', { email, password });\n      const jwToken = res.data;\n      console.log(jwToken);\n      global.auth.setToken(jwToken);\n      toast.success('Login Success');\n      // 4. 跳转到首页视图\n      props.history.push('/');\n    } catch (error) {\n      const message = error.response.data.message;\n      toast.error(message);\n    }\n  };\n\n  return (\n    <div className=\"login-wrapper\">\n      <form className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\n        <div className=\"field\">\n          <label className=\"label\">Email</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.email && 'is-danger'}`}\n              type=\"text\"\n              placeholder=\"Email\"\n              name=\"email\"\n              ref={register({\n                required: 'email is required',\n                pattern: {\n                  value: /^[A-Za-z0-9]+([_\\\\.][A-Za-z0-9]+)*@([A-Za-z0-9\\\\-]+\\.)+[A-Za-z]{2,6}$/,\n                  message: 'invalid email'\n                }\n              })}\n            />\n            {errors.email && (\n              <p className=\"helper has-text-danger\">{errors.email.message}</p>\n            )}\n          </div>\n        </div>\n        <div className=\"field\">\n          <label className=\"label\">Password</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.password && 'is-danger'}`}\n              type=\"password\"\n              placeholder=\"Password\"\n              name=\"password\"\n              ref={register({\n                required: 'password is required',\n                minLength: {\n                  value: 6,\n                  message: 'cannot be less than 6 digits'\n                }\n              })}\n            />\n            {errors.password && (\n              <p className=\"helper has-text-danger\">\n                {errors.password.message}\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"control\">\n          <button className=\"button is-fullwidth is-primary\">Login</button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}